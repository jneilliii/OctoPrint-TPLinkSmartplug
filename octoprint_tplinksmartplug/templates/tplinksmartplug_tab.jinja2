<div class="row-fluid" id="tplinksmartplug_energy_graph" data-bind="visible: loginState.isUser()"></div>
<div class="row-fluid" data-bind="visible: loginState.isUser()">
	<div class="btn-group pull-right">
		<button class="btn btn-mini" title="Toggle Legend" data-bind="click: toggle_legend"><i class="fa fa-list"></i></button>
	</div>
</div>
<div class="row-fluid" data-bind="visible: loginState.isUser()">
    <div class="span2">
		<label class="control-label">{{ _('Plug to Graph') }}</label>
		<div class="controls">
			<select class="input input-block-level" data-bind="options: filteredSmartplugs, optionsText: function(item){return item.value().label}, optionsValue: function(item){return item.value().ip}, value: plotted_graph_ip"></select>
		</div>
	</div>
	<div class="span4">
		<label class="control-label">{{ _('Start') }}</label>
		<div class="controls" style="position: relative">
			<input type="datetime-local" class="input-block-level" data-bind="textInput: graph_start_date, css: {'alert-error': graph_start_date() >= graph_end_date()}"/>
		</div>
	</div>
	<div class="span4">
		<label class="control-label">{{ _('End') }}</label>
		<div class="controls" style="position: relative">
			<input type="datetime-local" class="input-block-level" data-bind="textInput: graph_end_date, css: {'alert-error': graph_end_date() <= graph_start_date()}"/>
		</div>
	</div>
	<div class="span2">
		<div class="controls">
			<label class="control-label">&nbsp;</label>
			<button class="btn btn-primary" data-bind="click: plotEnergyData, disable: graph_end_date() <= graph_start_date() || processing_api_request"><i class="fa fa-spinner fa-spin" data-bind="visible: processing_api_request" style="display: none;"></i> Update</button>
		</div>
	</div>
</div>
